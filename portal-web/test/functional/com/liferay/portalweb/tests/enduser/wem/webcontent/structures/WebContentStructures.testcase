<definition component-name="portal-wcm">
	<property name="portal.release" value="true" />
	<property name="portal.upstream" value="true" />
	<property name="testray.main.component.name" value="Web Content Administration" />

	<set-up>
		<execute macro="TestCase#setUpPortalInstance" />

		<execute macro="User#firstLoginPG" />

		<execute macro="JSONGroup#addGroup">
			<var name="groupName" value="Test Site Name" />
		</execute>
	</set-up>

	<tear-down>
		<var method="PropsUtil#get('test.portal.instance')" name="testPortalInstance" />

		<if>
			<equals arg1="${testPortalInstance}" arg2="true" />
			<then>
				<execute macro="PortalInstances#tearDownCP" />
			</then>
			<else>
				<execute macro="JSONGroup#deleteGroupByName">
					<var name="groupName" value="Test Site Name" />
				</execute>
			</else>
		</if>
	</tear-down>

	<command name="AddStructures" priority="5">
		<property name="testray.component.names" value="Training,Web Content Administration" />

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#addCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name 1" />
		</execute>

		<for list="Boolean,Date,Decimal,Documents and Media" param="structureFieldName">
			<execute macro="DynamicDataMapping#addField">
				<var name="field" value="${structureFieldName}" />
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>

		<execute macro="WebContentStructures#saveCP">
			<var name="structureName" value="WC Structure Name 1" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#addCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name 2" />
		</execute>

		<for list="HTML,Image,Integer,Link to Page" param="structureFieldName">
			<execute macro="DynamicDataMapping#addField">
				<var name="field" value="${structureFieldName}" />
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>

		<execute macro="WebContentStructures#saveCP">
			<var name="structureName" value="WC Structure Name 2" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#addCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name 3" />
		</execute>

		<for list="Number,Radio,Select,Separator,Text,Text Box" param="structureFieldName">
			<execute macro="DynamicDataMapping#addField">
				<var name="field" value="${structureFieldName}" />
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>

		<execute macro="WebContentStructures#saveCP">
			<var name="structureName" value="WC Structure Name 3" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#viewCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name 1" />
		</execute>

		<execute macro="LexiconEntry#gotoEntry">
			<var name="rowEntry" value="WC Structure Name 1" />
		</execute>

		<for list="Boolean,Date,Decimal,Documents and Media" param="structureFieldName">
			<execute macro="DynamicDataMapping#viewField">
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#viewCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name 2" />
		</execute>

		<execute macro="LexiconEntry#gotoEntry">
			<var name="rowEntry" value="WC Structure Name 2" />
		</execute>

		<for list="HTML,Image,Integer,Link to Page" param="structureFieldName">
			<execute macro="DynamicDataMapping#viewField">
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#viewCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name 3" />
		</execute>

		<execute macro="LexiconEntry#gotoEntry">
			<var name="rowEntry" value="WC Structure Name 3" />
		</execute>

		<for list="Number,Radio,Select,Separator,Text,Text Box" param="structureFieldName">
			<execute macro="DynamicDataMapping#viewField">
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>
	</command>

	<command name="AddStructureViaLocaleURL" priority="4">
		<description message="This is a use case for LPS-77387." />
		<property name="test.name.skip.portal.instance" value="WebContentStructures#AddStructureViaLocaleURL" />

		<var method="PropsUtil#get('portal.url')" name="portalURL" />

		<execute macro="Navigator#openSpecificURL">
			<var name="url" value="${portalURL}/en/" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="LexiconEntry#gotoAdd" />

		<execute function="Pause" locator1="3000" />

		<execute macro="Navigator#ensureLocaleURL">
			<var name="locale" value="en" />
		</execute>

		<execute macro="WebContentStructures#addName">
			<var name="structureName" value="WC Structure Name" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Details" />
		</execute>

		<execute macro="PortletEntry#inputDescriptionTextInput">
			<var name="description" value="WC Structure Description" />
		</execute>

		<execute function="SelectFrame" value1="relative=top" />

		<execute macro="DynamicDataMapping#addField">
			<var name="field" value="Text" />
			<var name="fieldFieldLabel" value="Text" />
			<var name="fieldName" value="Text" />
		</execute>

		<execute macro="WebContentStructures#saveCP">
			<var name="structureName" value="WC Structure Name" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute function="AssertElementNotPresent" locator1="DDMSelectStructure#DDM_STRUCTURE_TABLE_NAME_2">
			<var name="key_ddlDataDefinitionName" value="WC Structure Name" />
		</execute>
	</command>

	<command name="EditSubstructureDefaultValues" priority="4">
		<property name="testray.component.names" value="Web Content Administration" />

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#addCP">
			<var name="structureDescription" value="WC Structure Description" />
			<var name="structureName" value="WC Structure Name1" />
		</execute>

		<for list="Text,Text Box,Image,Documents and Media" param="structureFieldName">
			<execute macro="DynamicDataMapping#addField">
				<var name="field" value="${structureFieldName}" />
				<var name="fieldFieldLabel" value="${structureFieldName}" />
				<var method="StringUtil#replace('${structureFieldName}', ' ', '')" name="fieldName" />
			</execute>
		</for>

		<execute macro="WebContentStructures#saveCP">
			<var name="structureName" value="WC Structure Name1" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="LexiconEntry#gotoAdd" />

		<execute macro="WebContentStructures#addName">
			<var name="structureName" value="2" />
		</execute>

		<execute macro="Panel#expandPanel">
			<var name="panel" value="Details" />
		</execute>

		<execute macro="PortletEntry#inputDescriptionTextInput">
			<var name="description" value="WC Structure Description" />
		</execute>

		<execute macro="WebContentStructures#addSubstructure">
			<var name="parentStructureName" value="WC Structure Name1" />
			<var name="structureName" value="2" />
		</execute>

		<execute macro="DynamicDataMapping#addField">
			<var name="field" value="Integer" />
			<var name="fieldFieldLabel" value="Integer" />
			<var name="fieldName" value="Integer" />
		</execute>

		<execute macro="WebContentStructures#saveCP">
			<var name="structureName" value="WC Structure Name1" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentStructures#editSubstructureDefaultValuesCP">
			<var name="editSubstructureFieldNames" value="Text" />
			<var name="substructureName" value="2" />
		</execute>
	</command>

	<command name="ValidateDDMNavigation" priority="4">
		<property name="testray.component.names" value="Web Content Administration" />

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="global" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="WebContentNavigator#gotoManageTemplatesViaStructures">
			<var name="structureName" value="Basic Web Content" />
		</execute>

		<execute macro="WebContentTemplates#addCP">
			<var name="templateDescription" value="Test WC Template Description" />
			<var name="templateName" value="Test WC Template" />
		</execute>

		<execute macro="LexiconEntry#gotoEntryMenuItem">
			<var name="menuItem" value="Edit" />
			<var name="rowEntry" value="Test WC Template" />
		</execute>

		<execute macro="Navigator#gotoBack" />

		<execute macro="SiteAdmin#viewPortletTitle">
			<var name="portletTitle" value="Templates for Structure: Basic Web Content" />
		</execute>

		<execute macro="WebContentTemplates#viewTableEntryCP">
			<var name="templateDescription" value="Test WC Template Description" />
			<var name="templateName" value="Test WC Template" />
		</execute>

		<execute macro="WebContentTemplates#viewTableEntryCP">
			<var name="templateDescription" value="" />
			<var name="templateName" value="Basic Web Content" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<execute macro="SiteAdmin#viewPortletTitle">
			<var name="portletTitle" value="Web Content" />
		</execute>

		<execute macro="WebContentStructures#viewTableEntryCP">
			<var name="structureDescription" value="Basic Web Content" />
			<var name="structureName" value="Basic Web Content" />
		</execute>
	</command>

	<command name="ViewFavoriteStructure" priority="4">
		<property name="testray.component.names" value="Web Content Administration" />

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="NavItem#gotoStructures" />

		<var name="n" value="0" />

		<while>
			<not>
				<equals arg1="${n}" arg2="15" />
			</not>
			<then>
				<execute macro="WebContentStructures#addCP">
					<var name="structureDescription" value="WC Structure Description" />
					<var name="structureName" value="WC Structure Name ${n}" />
				</execute>

				<execute macro="DynamicDataMapping#addField">
					<var name="field" value="HTML" />
					<var name="fieldFieldLabel" value="HTML" />
					<var name="fieldName" value="HTML" />
				</execute>

				<execute macro="WebContentStructures#saveCP">
					<var name="structureName" value="${structureName}" />
				</execute>

				<var method="MathUtil#sum('${n}', '1')" name="n" />
			</then>
		</while>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="WebContentNavigator#gotoMoreStructuresViaPlusButton">
			<var name="pageMod" value="8 of 17" />
		</execute>

		<for list="Basic Web Content,WC Structure Name 0,WC Structure Name 1,WC Structure Name 2,WC Structure Name 3,WC Structure Name 4,WC Structure Name 5,WC Structure Name 6,WC Structure Name 7,WC Structure Name 8,WC Structure Name 9,WC Structure Name 10,WC Structure Name 11,WC Structure Name 12,WC Structure Name 13,WC Structure Name 14" param="structureName">
			<execute macro="WebContentStructures#viewStructuresViaMoreIFrame">
				<var name="structureName" value="${structureName}" />
			</execute>
		</for>

		<execute macro="WebContentStructures#viewNoFavoriteStructure" />

		<execute macro="WebContentStructures#addFavoriteStructure">
			<var name="structureName" value="WC Structure Name 9" />
		</execute>

		<execute macro="WebContentStructures#viewFavoriteStructureViaIFrame">
			<var name="indexNumber" value="1" />
			<var name="structureName" value="WC Structure Name 9" />
		</execute>

		<execute macro="WebContent#openWebContentAdmin">
			<var name="siteURLKey" value="test-site-name" />
		</execute>

		<execute macro="WebContentStructures#viewFavoriteStructureViaPlusButton">
			<var name="structureName" value="WC Structure Name 9" />
		</execute>
	</command>
</definition>